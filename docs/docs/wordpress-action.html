<ul id="markdown-toc">
  <li><a href="#请求地址" id="markdown-toc-请求地址">请求地址</a></li>
  <li><a href="#参数" id="markdown-toc-参数">参数</a>    <ul>
      <li><a href="#object-button" id="markdown-toc-object-button">object button</a></li>
      <li><a href="#object-data" id="markdown-toc-object-data">object data</a>        <ul>
          <li><a href="#请求参数" id="markdown-toc-请求参数">请求参数</a></li>
        </ul>
      </li>
      <li><a href="#string-method" id="markdown-toc-string-method">string method</a></li>
      <li><a href="#boolean-login" id="markdown-toc-boolean-login">boolean login</a></li>
    </ul>
  </li>
  <li><a href="#ajax-设置" id="markdown-toc-ajax-设置">AJAX 设置</a>    <ul>
      <li><a href="#按钮对象-dataset-属性参数" id="markdown-toc-按钮对象-dataset-属性参数">按钮对象 dataset 属性参数</a></li>
    </ul>
  </li>
  <li><a href="#相关资源" id="markdown-toc-相关资源">相关资源</a></li>
</ul>

<h1 id="webuiwpaction-button-data-method-login-">webui.wp.action( button, data, method, login )</h1>
<p>使用 <code class="language-plaintext highlighter-rouge">jQuery.ajax()</code> 方法进行前台请求操作，返回消息内容参考：<a href="./event-ajax.html#objectresult-返回结果数据">webui.ajax 事件返回结果数据</a></p>

<h2 id="请求地址">请求地址</h2>
<p>请使用 Webian WordPress One 插件中 hooks 进行操作设定</p>
<ul>
  <li>Rest API URL
    <blockquote>
      <p><code class="language-plaintext highlighter-rouge">{domain}/wp-json</code></p>
    </blockquote>
  </li>
  <li>Rest API Endpoint
    <blockquote>
      <p><code class="language-plaintext highlighter-rouge">/wwpo/ajax/action</code></p>
    </blockquote>
  </li>
</ul>

<h2 id="参数">参数</h2>
<h3 id="object-button">object button</h3>
<p>AJAX 触发按钮对象，作用：</p>
<ul>
  <li>Form 表单内容判断（根据按钮对象获取该按钮父级 Form 表单内各个内容值，以对象 <code class="language-plaintext highlighter-rouge">object</code> 格式返回）</li>
  <li>当按钮对象 Dataset 属性获取</li>
  <li>AJAX 操作时执行加载动画和按钮禁用</li>
</ul>

<blockquote>
  <p>若请求操作不为按钮触发，可为空，请用 <code class="language-plaintext highlighter-rouge">null</code> 代替</p>
</blockquote>

<h3 id="object-data">object data</h3>
<p>AJAX 发送到服务器的数据</p>
<ul>
  <li>若传参为空，函数会自动读取当前按钮对象的所有 Dataset 属性值</li>
</ul>

<h4 id="请求参数">请求参数</h4>
<p>以下为 AJAX 请求操作时要用到的参数，与其他数据一同提交到 Rest API 函数</p>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>必填</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>action</td>
      <td>string</td>
      <td>是</td>
      <td>请求 hooks 函数别名：<code class="language-plaintext highlighter-rouge">wwpo_ajax_{method}_{action}</code>，按钮对象的 <code class="language-plaintext highlighter-rouge">value</code> 属性</td>
    </tr>
    <tr>
      <td>token</td>
      <td>string</td>
      <td>否</td>
      <td>登录令牌，通过 <code class="language-plaintext highlighter-rouge">webuiSettings</code> 设定</td>
    </tr>
  </tbody>
</table>

<h3 id="string-method">string method</h3>
<p>AJAX 请求方式，默认为：POST</p>
<ul>
  <li>当按钮对象父级表单 <code class="language-plaintext highlighter-rouge">method="GET"</code> 时，请求方式设置为：<strong>GET</strong></li>
  <li>当 <code class="language-plaintext highlighter-rouge">boolean.login</code> 为 <code class="language-plaintext highlighter-rouge">false</code> 时，请求方式设置为：<strong>GET</strong></li>
</ul>

<h3 id="boolean-login">boolean login</h3>
<p>AJAX 请求前进行登录操作，默认：<strong>false</strong></p>

<h2 id="ajax-设置">AJAX 设置</h2>
<p>设置参数参考：<a href="./event-ajax.html#object-options">webui.ajax 事件请求选项</a></p>
<ul>
  <li>函数默认开启按钮加载动画</li>
  <li><code class="language-plaintext highlighter-rouge">options.error</code> 函数输出 AJAX 错误消息</li>
</ul>

<h3 id="按钮对象-dataset-属性参数">按钮对象 dataset 属性参数</h3>
<p>自定义 dataset 属性参数主要用于 AJAX 执行前加载一个 modal 组件，方便 AJAX 执行完成时显示返回结果，目的是为了用户进行操作时体验流畅，在 AJAX 结果返回前 modal 组件会一直显示 loading 等待动画。如果直接在执行结果返回时才显示 modal 组件会有一定的等待空闲，用户在体验上会感到不佳。</p>
<ul>
  <li>可使用 <code class="language-plaintext highlighter-rouge">ajax 事件返回结果数据</code> 中 <a href="./event-ajax.html#object-options#请求成功时渲染-template-模板">请求成功时渲染 template 模板</a> 进行结果显示</li>
  <li>使用 Webian WordPress One 插件中函数进行内容返回</li>
</ul>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>默认值</th>
      <th>必填</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>modal-close</td>
      <td>boolean</td>
      <td>false</td>
      <td>否</td>
      <td>是否显示弹出层关闭按钮</td>
    </tr>
    <tr>
      <td>modal-title</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层标题</td>
    </tr>
    <tr>
      <td>modal-size</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层尺寸</td>
    </tr>
    <tr>
      <td>modal-button</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层提交操作按钮动作名称 <br /> 默认使用 <code class="language-plaintext highlighter-rouge">[data-action="ajax"]</code> 方法进行 AJAX 请求操作用</td>
    </tr>
  </tbody>
</table>

<h2 id="相关资源">相关资源</h2>
<ul>
  <li><a href="./wordpress-action.html">设置 WordPress Rest API 操作</a></li>
  <li><a href="./wordpress-action.html">设置 WordPress Rest API 登录</a></li>
  <li><a href="https://wehtml.cn">WordPress Cookie Authentication</a></li>
  <li><a href="https://wehtml.cn">WordPress Basic Authentication</a></li>
</ul>
