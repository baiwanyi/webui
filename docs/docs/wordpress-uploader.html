<ul id="markdown-toc">
  <li><a href="#支持" id="markdown-toc-支持">支持</a></li>
  <li><a href="#参数" id="markdown-toc-参数">参数</a></li>
  <li><a href="#object-options" id="markdown-toc-object-options">object options</a>    <ul>
      <li><a href="#stringtype-的合法值" id="markdown-toc-stringtype-的合法值">string.type 的合法值</a></li>
      <li><a href="#functioncallback-的参数" id="markdown-toc-functioncallback-的参数">function.callback 的参数</a></li>
    </ul>
  </li>
  <li><a href="#相关资源" id="markdown-toc-相关资源">相关资源</a></li>
</ul>

<h1 id="webuiwpuploader-options-">webui.wp.uploader( options )</h1>
<p>调用 WordPress 媒体库上传方式</p>

<h2 id="支持">支持</h2>
<p>需要 <code class="language-plaintext highlighter-rouge">wp_enqueue_media</code> 函数的支持</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 在使用上传的页面添加以下语句</span>
<span class="nf">wp_enqueue_media</span><span class="p">();</span>

<span class="c1">// 使用排队媒体脚本的参数</span>
<span class="nf">wp_enqueue_media</span><span class="p">([</span>
    <span class="s1">'post'</span> <span class="o">=&gt;</span> <span class="mi">1</span>
<span class="p">]);</span>
</code></pre></div></div>

<h2 id="参数">参数</h2>
<h2 id="object-options">object options</h2>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>默认值</th>
      <th>必填</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>title</td>
      <td>string</td>
      <td>媒体库</td>
      <td>是</td>
      <td>媒体库弹出层标题</td>
    </tr>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>image</td>
      <td>是</td>
      <td>上传媒体类型</td>
    </tr>
    <tr>
      <td>selection</td>
      <td>integer</td>
      <td>0</td>
      <td>否</td>
      <td>选中的媒体 ID，打开媒体库弹出层时会勾选该项目</td>
    </tr>
    <tr>
      <td>multiple</td>
      <td>boolean</td>
      <td>false</td>
      <td>是</td>
      <td>上传选择时是否多选</td>
    </tr>
    <tr>
      <td>callback</td>
      <td>function</td>
      <td> </td>
      <td>否</td>
      <td>选中媒体后执行的回调函数</td>
    </tr>
    <tr>
      <td>author</td>
      <td>integer</td>
      <td>null</td>
      <td>否</td>
      <td>用户 ID，设定后将只显示该用户上传的媒体文件</td>
    </tr>
    <tr>
      <td>button_text</td>
      <td>string</td>
      <td>选择</td>
      <td>否</td>
      <td>选择按钮标签</td>
    </tr>
  </tbody>
</table>

<h4 id="stringtype-的合法值">string.type 的合法值</h4>

<table>
  <thead>
    <tr>
      <th>值</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>image</td>
      <td>图片类型</td>
    </tr>
    <tr>
      <td>video</td>
      <td>视频类型</td>
    </tr>
  </tbody>
</table>

<h3 id="functioncallback-的参数">function.callback 的参数</h3>
<p>执行 callback 函数时，会携带一个包含当前选中媒体的信息参数</p>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>说明</th>
      <th>示例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>integer</td>
      <td>媒体 ID</td>
      <td>1234</td>
    </tr>
    <tr>
      <td>title</td>
      <td>string</td>
      <td>媒体标题</td>
      <td> </td>
    </tr>
    <tr>
      <td>filename</td>
      <td>string</td>
      <td>媒体文件名</td>
      <td> </td>
    </tr>
    <tr>
      <td>url</td>
      <td>string</td>
      <td>媒体文件 URL 链接</td>
      <td>/uploads/images.png</td>
    </tr>
    <tr>
      <td>link</td>
      <td>string</td>
      <td>媒体附件页 URL 链接</td>
      <td> </td>
    </tr>
    <tr>
      <td>author</td>
      <td>integer</td>
      <td>上传作者 ID</td>
      <td>1</td>
    </tr>
    <tr>
      <td>description</td>
      <td>string</td>
      <td>媒体描述，在附件页显示</td>
      <td> </td>
    </tr>
    <tr>
      <td>caption</td>
      <td>string</td>
      <td>媒体说明文字</td>
      <td> </td>
    </tr>
    <tr>
      <td>name</td>
      <td>string</td>
      <td>媒体上传别名</td>
      <td> </td>
    </tr>
    <tr>
      <td>status</td>
      <td>string</td>
      <td>媒体上传状态</td>
      <td>inherit</td>
    </tr>
    <tr>
      <td>uploadedTo</td>
      <td>integer</td>
      <td>媒体关联文章 ID</td>
      <td>5678</td>
    </tr>
    <tr>
      <td>date</td>
      <td>datetime</td>
      <td>媒体上传时间</td>
      <td>2021-07-22T02:56:06.000Z</td>
    </tr>
    <tr>
      <td>modified</td>
      <td>datetime</td>
      <td>媒体修改时间</td>
      <td>2021-07-22T02:56:06.000Z</td>
    </tr>
    <tr>
      <td>menuOrder</td>
      <td>integer</td>
      <td>媒体排序</td>
      <td>0</td>
    </tr>
    <tr>
      <td>mime</td>
      <td>string</td>
      <td>媒体 MIME 类型</td>
      <td>image/png</td>
    </tr>
    <tr>
      <td>type</td>
      <td>string</td>
      <td>媒体类型</td>
      <td>image</td>
    </tr>
    <tr>
      <td>subtype</td>
      <td>string</td>
      <td>媒体后缀名</td>
      <td>png</td>
    </tr>
    <tr>
      <td>icon</td>
      <td>string</td>
      <td>媒体类型图标</td>
      <td>/wp-includes/images/media/default.png</td>
    </tr>
    <tr>
      <td>dateFormatted</td>
      <td>date</td>
      <td>媒体发布格式化时间</td>
      <td>2021年12月13日</td>
    </tr>
    <tr>
      <td>nonces.update</td>
      <td>string</td>
      <td>上传随机数</td>
      <td> </td>
    </tr>
    <tr>
      <td>nonces.delete</td>
      <td>string</td>
      <td>删除随机数</td>
      <td> </td>
    </tr>
    <tr>
      <td>nonces.edit</td>
      <td>string</td>
      <td>编辑随机数</td>
      <td> </td>
    </tr>
    <tr>
      <td>editLink</td>
      <td>string</td>
      <td>媒体编辑链接</td>
      <td>/wp-admin/post.php?post=1234&amp;action=edit</td>
    </tr>
    <tr>
      <td>authorName</td>
      <td>string</td>
      <td>上传作者显示名字</td>
      <td> </td>
    </tr>
    <tr>
      <td>authorLink</td>
      <td>string</td>
      <td>上传作者后台页面链接</td>
      <td>/wp-admin/user-edit.php?user_id=1</td>
    </tr>
    <tr>
      <td>uploadedToTitle</td>
      <td>string</td>
      <td>媒体关联文章标题</td>
      <td> </td>
    </tr>
    <tr>
      <td>uploadedToLink</td>
      <td>string</td>
      <td>媒体关联文章编辑链接</td>
      <td>/wp-admin/post.php?post=5678&amp;action=edit</td>
    </tr>
    <tr>
      <td>filesizeInBytes</td>
      <td>integer</td>
      <td>媒体文件大小（字节）</td>
      <td>57574074</td>
    </tr>
    <tr>
      <td>filesizeHumanReadable</td>
      <td>string</td>
      <td>媒体文件大小（本地格式化）</td>
      <td>55 MB</td>
    </tr>
    <tr>
      <td>context</td>
      <td>string</td>
      <td>媒体关联文字</td>
      <td> </td>
    </tr>
    <tr>
      <td>width</td>
      <td>integer</td>
      <td>媒体原始宽度（像素）</td>
      <td>1280</td>
    </tr>
    <tr>
      <td>height</td>
      <td>integer</td>
      <td>媒体原始高度（像素）</td>
      <td>720</td>
    </tr>
    <tr>
      <td>alt</td>
      <td>string</td>
      <td>图片 alt 替代文本</td>
      <td> </td>
    </tr>
    <tr>
      <td>orientation</td>
      <td>string</td>
      <td>图片风格</td>
      <td>landscape</td>
    </tr>
    <tr>
      <td>sizes.thumbnail.height</td>
      <td>integer</td>
      <td>图片缩略图高度（像素）</td>
      <td>150</td>
    </tr>
    <tr>
      <td>sizes.thumbnail.width</td>
      <td>integer</td>
      <td>图片缩略图宽度（像素）</td>
      <td>150</td>
    </tr>
    <tr>
      <td>sizes.thumbnail.url</td>
      <td>string</td>
      <td>图片缩略图地址</td>
      <td>/uploads/images-150x150.png</td>
    </tr>
    <tr>
      <td>sizes.medium.height</td>
      <td>integer</td>
      <td>图片中等尺寸高度（像素）</td>
      <td>300</td>
    </tr>
    <tr>
      <td>sizes.medium.width</td>
      <td>integer</td>
      <td>图片中等尺寸宽度（像素）</td>
      <td>300</td>
    </tr>
    <tr>
      <td>sizes.medium.url</td>
      <td>string</td>
      <td>图片中等尺寸地址</td>
      <td>/uploads/images-300x300.png</td>
    </tr>
    <tr>
      <td>sizes.full.height</td>
      <td>integer</td>
      <td>图片大尺寸高度（像素）</td>
      <td>1000</td>
    </tr>
    <tr>
      <td>sizes.full.width</td>
      <td>integer</td>
      <td>图片大尺寸宽度（像素）</td>
      <td>1000</td>
    </tr>
    <tr>
      <td>sizes.full.url</td>
      <td>string</td>
      <td>图片大尺寸地址</td>
      <td>/uploads/images-1000x1000.png</td>
    </tr>
    <tr>
      <td>meta.artist</td>
      <td>string</td>
      <td>音频所属艺术家</td>
      <td>贝多芬</td>
    </tr>
    <tr>
      <td>meta.album</td>
      <td>string</td>
      <td>音频所属专辑</td>
      <td>Classics</td>
    </tr>
    <tr>
      <td>meta.bitrate</td>
      <td>string</td>
      <td>音频码率（kbps）</td>
      <td>1040</td>
    </tr>
    <tr>
      <td>meta.bitrate_mode</td>
      <td>string</td>
      <td>音频编码方式</td>
      <td>vbr</td>
    </tr>
    <tr>
      <td>fileLength</td>
      <td>string</td>
      <td>视频时间</td>
      <td>11:21</td>
    </tr>
    <tr>
      <td>fileLengthHumanReadable</td>
      <td>string</td>
      <td>视频时间（本地格式化）</td>
      <td>11分, 21秒</td>
    </tr>
    <tr>
      <td>image.src</td>
      <td>string</td>
      <td>视频封面地址</td>
      <td>/wp-includes/images/media/video.png</td>
    </tr>
    <tr>
      <td>image.width</td>
      <td>integer</td>
      <td>视频封面宽度（像素）</td>
      <td>48</td>
    </tr>
    <tr>
      <td>image.height</td>
      <td>integer</td>
      <td>视频封面高度（像素）</td>
      <td>64</td>
    </tr>
    <tr>
      <td>thumb.src</td>
      <td>string</td>
      <td>视频封面缩略图地址</td>
      <td>/wp-includes/images/media/video.png</td>
    </tr>
    <tr>
      <td>thumb.width</td>
      <td>integer</td>
      <td>视频封面缩略图宽度（像素）</td>
      <td>48</td>
    </tr>
    <tr>
      <td>thumb.height</td>
      <td>integer</td>
      <td>视频封面缩略图高度（像素）</td>
      <td>64</td>
    </tr>
    <tr>
      <td>compat.item</td>
      <td>string</td>
      <td>媒体兼容性设置</td>
      <td> </td>
    </tr>
    <tr>
      <td>compat.meta</td>
      <td>string</td>
      <td>媒体兼容性设置</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="相关资源">相关资源</h2>
<ul>
  <li><a href="./wordpress-action.html">如何设置 WordPress Rest API 操作？</a></li>
  <li><a href="https://developer.wordpress.org/reference/functions/wp_enqueue_media/">wp_enqueue_media 函数</a></li>
  <li><a href="https://wehtml.cn">WordPress Cookie Authentication</a></li>
  <li><a href="https://wehtml.cn">WordPress Basic Authentication</a></li>
</ul>
