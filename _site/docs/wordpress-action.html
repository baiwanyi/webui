<!DOCTYPE html>
<html lang="zh-CN">

    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="Content-Type" content="text/html; UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover" />
        <meta name="renderer" content="webkit" />
        <meta name="force-rendering" content="webkit" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="keywords" content="" />
        <meta name="description"
              content="基于 Bootstrap 的 WordPress 应用扩展框架" />
        <title>wp.action | WebUI JS 框架 - 基于 Bootstrap 的 WordPress 应用扩展框架</title>
        <link rel="shortcut icon" href="favicon.ico" />
        <link rel="apple-touch-icon" href="/assets/images/touch.png" />
        <link rel="stylesheet" href="//at.alicdn.com/t/font_2114238_4ca663qlue8.css">
        <link rel="stylesheet" href="/assets/css/style.css">
    </head>

    <body>
        <header class="site-header sticky-top">
            <div class="container-fluid">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#site-navbar" aria-controls="site-navbar" aria-label="站点导航">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <a class="navbar-brand" href="/">WebUI JS 框架</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#sidebar-navbar"
                            aria-controls="sidebar-navbar" aria-label="页面导航">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="offcanvas offcanvas-start" data-bs-backdrop="false" id="site-navbar">
                        <div class="offcanvas-header">
                            <h4 class="offcanvas-title" id="offcanvasNavbarLabel">导航菜单</h4>
                            <button type="button" class="btn-close bg-light" data-bs-dismiss="offcanvas"
                                    aria-label="Close"></button>
                        </div>
                        <div class="offcanvas-body">
                            <div class="row w-100 justify-content-between align-items-center g-0">
                                <div class="col-12 col-lg-8">
                                    <ul class="site-navbar navbar-nav me-auto my-2 my-lg-0 ms-lg-3 navbar-nav-scroll">
                                        
                                        <li class="nav-item">
                                            
                                            <a class="nav-link" href="/"
                                               rel="bookmark">首页</a>
                                            
                                        </li>
                                        
                                        <li class="nav-item">
                                            
                                            <a class="nav-link active" aria-current="page" href="/docs/introduction.html"
                                               rel="bookmark">文档</a>
                                            
                                        </li>
                                        
                                        <li class="nav-item">
                                            
                                            <a class="nav-link" href="/customize.html"
                                               rel="bookmark">定制</a>
                                            
                                        </li>
                                        
                                        <li class="nav-item">
                                            
                                            <a class="nav-link" href="/changelog.html"
                                               rel="bookmark">更新日志</a>
                                            
                                        </li>
                                        
                                    </ul>
                                </div>

                                <div class="col-12 col-lg-2">
                                    <ul class="site-contact navbar-nav flex-row justify-content-lg-end">
                                        
                                        <li class="nav-item">
                                            <a class="nav-link p-2" href="https://github.com/baiwanyi" target="_blank"
                                               rel="noopener">
                                                <span class="icon icon-github"></span>
                                                <span class="visually-hidden">GitHub</span>
                                            </a>
                                        </li>
                                        
                                        <li class="nav-item">
                                            <a class="nav-link p-2" href="https://weibo.com/u/6305885570" target="_blank"
                                               rel="noopener">
                                                <span class="icon icon-weibo"></span>
                                                <span class="visually-hidden">微博</span>
                                            </a>
                                        </li>
                                        
                                    </ul>
                                    <!-- /.site-contact -->
                                </div>

                                <div class="col-12 col-lg-2 text-lg-end">
                                    <a href="/docs/introduction"
                                       class="btn btn-outline-primary d-lg-inline-block my-2 my-md-0 ms-md-3"
                                       rel="bookmark">使用
                                        WEBUI</a>
                                </div>
                            </div>
                        </div>
                        <!-- /.offcanvas-body -->
                    </div>
                    <!-- /#site-navbar -->
                </nav>
                <!-- /.navbar -->
            </div>
            <!-- /.container -->
        </header>
        <!-- /.site-header -->


<div class="site-main container-fluid">
    <div class="row g-0">
        <aside class="site-sidebar col-12 col-lg-2 d-md-block">
            <div class="navbar navbar-expand-lg navbar-light">
                <div class="offcanvas offcanvas-end" tabindex="-1" id="sidebar-navbar" data-bs-backdrop="false"
                     aria-labelledby="sidebarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="sidebarLabel">Offcanvas</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <nav class="nav flex-column w-100">
                            








<a class="nav-link" href="/docs/introduction.html">介绍</a>









<a class="nav-link" href="/docs/config.html">配置</a>









<a class="nav-link" href="/docs/function.html">函数</a>









<a class="nav-link" href="/docs/event.html">事件</a>









<a class="nav-link" href="/docs/components.html">组件</a>









<a class="nav-link" href="/docs/methods.html">方法</a>









<a class="nav-link active" aria-current="page" href="/docs/wordpress.html">WordPress</a>




<nav class="submenu nav flex-column">
    
    
    <a class="nav-link hover" aria-current="page" href="/docs/wordpress-action.html">wp.action</a>
    
    
    
    <a class="nav-link" href="/docs/wordpress-admin.html">wp.admin</a>
    
    
    
    <a class="nav-link" href="/docs/wordpress-uploader.html">wp.uploader</a>
    
    
</nav>





















































































                        </nav>
                    </div>
                </div>
            </div>
        </aside>

        <main class="col-12 col-lg-10 ms-sm-auto">
            <div class="p-2 p-lg-4">
                <div class="row">
                    <div class="site-toc col-12 col-lg-3 order-2 end-0">
                        <div class="position-sticky">
                            <ul class="list-inline" id="site-markdown-toc"></ul>
                        </div>
                    </div>
                    <div class="site-markdown col-12 col-lg-8 order-3"><ul id="markdown-toc">
  <li><a href="#请求地址" id="markdown-toc-请求地址">请求地址</a></li>
  <li><a href="#参数" id="markdown-toc-参数">参数</a>    <ul>
      <li><a href="#object-button" id="markdown-toc-object-button">object button</a></li>
      <li><a href="#object-data" id="markdown-toc-object-data">object data</a>        <ul>
          <li><a href="#请求参数" id="markdown-toc-请求参数">请求参数</a></li>
        </ul>
      </li>
      <li><a href="#string-method" id="markdown-toc-string-method">string method</a></li>
      <li><a href="#boolean-login" id="markdown-toc-boolean-login">boolean login</a></li>
    </ul>
  </li>
  <li><a href="#ajax-设置" id="markdown-toc-ajax-设置">AJAX 设置</a>    <ul>
      <li><a href="#按钮对象-dataset-属性参数" id="markdown-toc-按钮对象-dataset-属性参数">按钮对象 dataset 属性参数</a></li>
    </ul>
  </li>
  <li><a href="#相关资源" id="markdown-toc-相关资源">相关资源</a></li>
</ul>

<h1 id="webuiwpaction-button-data-method-login-">webui.wp.action( button, data, method, login )</h1>
<p>使用 <code class="language-plaintext highlighter-rouge">jQuery.ajax()</code> 方法进行前台请求操作，返回消息内容参考：<a href="./event-ajax.html#objectresult-返回结果数据">webui.ajax 事件返回结果数据</a></p>

<h2 id="请求地址">请求地址</h2>
<p>请使用 Webian WordPress One 插件中 hooks 进行操作设定</p>
<ul>
  <li>Rest API URL
    <blockquote>
      <p><code class="language-plaintext highlighter-rouge">{domain}/wp-json</code></p>
    </blockquote>
  </li>
  <li>Rest API Endpoint
    <blockquote>
      <p><code class="language-plaintext highlighter-rouge">/wwpo/ajax/action</code></p>
    </blockquote>
  </li>
</ul>

<h2 id="参数">参数</h2>
<h3 id="object-button">object button</h3>
<p>AJAX 触发按钮对象，作用：</p>
<ul>
  <li>Form 表单内容判断（根据按钮对象获取该按钮父级 Form 表单内各个内容值，以对象 <code class="language-plaintext highlighter-rouge">object</code> 格式返回）</li>
  <li>当按钮对象 Dataset 属性获取</li>
  <li>AJAX 操作时执行加载动画和按钮禁用</li>
</ul>

<blockquote>
  <p>若请求操作不为按钮触发，可为空，请用 <code class="language-plaintext highlighter-rouge">null</code> 代替</p>
</blockquote>

<h3 id="object-data">object data</h3>
<p>AJAX 发送到服务器的数据</p>
<ul>
  <li>若传参为空，函数会自动读取当前按钮对象的所有 Dataset 属性值</li>
</ul>

<h4 id="请求参数">请求参数</h4>
<p>以下为 AJAX 请求操作时要用到的参数，与其他数据一同提交到 Rest API 函数</p>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>必填</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>action</td>
      <td>string</td>
      <td>是</td>
      <td>请求 hooks 函数别名：<code class="language-plaintext highlighter-rouge">wwpo_ajax_{method}_{action}</code>，按钮对象的 <code class="language-plaintext highlighter-rouge">value</code> 属性</td>
    </tr>
    <tr>
      <td>token</td>
      <td>string</td>
      <td>否</td>
      <td>登录令牌，通过 <code class="language-plaintext highlighter-rouge">webuiSettings</code> 设定</td>
    </tr>
  </tbody>
</table>

<h3 id="string-method">string method</h3>
<p>AJAX 请求方式，默认为：POST</p>
<ul>
  <li>当按钮对象父级表单 <code class="language-plaintext highlighter-rouge">method="GET"</code> 时，请求方式设置为：<strong>GET</strong></li>
  <li>当 <code class="language-plaintext highlighter-rouge">boolean.login</code> 为 <code class="language-plaintext highlighter-rouge">false</code> 时，请求方式设置为：<strong>GET</strong></li>
</ul>

<h3 id="boolean-login">boolean login</h3>
<p>AJAX 请求前进行登录操作，默认：<strong>false</strong></p>

<h2 id="ajax-设置">AJAX 设置</h2>
<p>设置参数参考：<a href="./event-ajax.html#object-options">webui.ajax 事件请求选项</a></p>
<ul>
  <li>函数默认开启按钮加载动画</li>
  <li><code class="language-plaintext highlighter-rouge">options.error</code> 函数输出 AJAX 错误消息</li>
</ul>

<h3 id="按钮对象-dataset-属性参数">按钮对象 dataset 属性参数</h3>
<p>自定义 dataset 属性参数主要用于 AJAX 执行前加载一个 modal 组件，方便 AJAX 执行完成时显示返回结果，目的是为了用户进行操作时体验流畅，在 AJAX 结果返回前 modal 组件会一直显示 loading 等待动画。如果直接在执行结果返回时才显示 modal 组件会有一定的等待空闲，用户在体验上会感到不佳。</p>
<ul>
  <li>可使用 <code class="language-plaintext highlighter-rouge">ajax 事件返回结果数据</code> 中 <a href="./event-ajax.html#object-options#请求成功时渲染-template-模板">请求成功时渲染 template 模板</a> 进行结果显示</li>
  <li>使用 Webian WordPress One 插件中函数进行内容返回</li>
</ul>

<table>
  <thead>
    <tr>
      <th>属性</th>
      <th>类型</th>
      <th>默认值</th>
      <th>必填</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>modal-close</td>
      <td>boolean</td>
      <td>false</td>
      <td>否</td>
      <td>是否显示弹出层关闭按钮</td>
    </tr>
    <tr>
      <td>modal-title</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层标题</td>
    </tr>
    <tr>
      <td>modal-size</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层尺寸</td>
    </tr>
    <tr>
      <td>modal-button</td>
      <td>string</td>
      <td> </td>
      <td>否</td>
      <td>弹出层提交操作按钮动作名称 <br /> 默认使用 <code class="language-plaintext highlighter-rouge">[data-action="ajax"]</code> 方法进行 AJAX 请求操作用</td>
    </tr>
  </tbody>
</table>

<h2 id="相关资源">相关资源</h2>
<ul>
  <li><a href="./wordpress-action.html">设置 WordPress Rest API 操作</a></li>
  <li><a href="./wordpress-action.html">设置 WordPress Rest API 登录</a></li>
  <li><a href="https://wehtml.cn">WordPress Cookie Authentication</a></li>
  <li><a href="https://wehtml.cn">WordPress Basic Authentication</a></li>
</ul>
</div>
                    <footer class="col-12 order-4">
                        <div class="lead text-black-50 mt-4 mb-4 mb-lg-0">&COPY WEBUI.CC</div>
                    </footer>
                </div>
            </div>
        </main>
    </div>
</div>

<script src='//cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
<script src='//cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.min.js'></script>
<script src="//cdn.bootcdn.net/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
<script src='//cdn.webian.dev/webui/dist/webui.min.js'></script>
<script src="/assets/js/apps.js"></script>
</body>

</html>

